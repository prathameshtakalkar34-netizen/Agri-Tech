<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Farmer Dashboard</title>
   <script src="js/script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/new.css">
  <link rel="stylesheet" href="css/colour.css">

</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar">
    <a href="home.html">ğŸ  Home</a>
    <a href="profile.html" >ğŸ‘¤ Profile</a>
    <a href="history.html">ğŸ“œ History</a>
    <a href="data.html" >ğŸ“Š Data</a>
    <a href="settings.html">âš™ Settings</a>
    <a href="image.html">ğŸ–¼ Images</a>
  </div>

  <!-- Main Content -->
  <div class="content">
    <h1>Real-Time Crop Market Price</h1>
    <canvas id="realtimeChart" width="600" height="300"></canvas>
  </div>

  <!-- Chart Script -->
  <script>
    const ctx = document.getElementById('realtimeChart').getContext('2d');

    // Initial chart
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [], // time labels
        datasets: [{
          label: 'Crop Market Price (â‚¹/kg)',
          data: [],
          borderColor: 'rgba(46, 204, 113, 1)',
          backgroundColor: 'rgba(46, 204, 113, 0.2)',
          tension: 0.4,
          fill: true
        }]
      },
      options: {
        responsive: true,
        animation: false,
        scales: {
          x: { title: { display: true, text: 'Time (seconds)' } },
          y: { title: { display: true, text: 'Price (â‚¹/kg)' } }
        }
      }
    });

    // Function to add new data every second
    let time = 0;
    setInterval(() => {
      time++;
      const newPrice = 20 + Math.random() * 10; // random price between 20-30

      // Add new point
      chart.data.labels.push(time + "s");
      chart.data.datasets[0].data.push(newPrice);

      // Keep only last 20 points
      if (chart.data.labels.length > 20) {
        chart.data.labels.shift();
        chart.data.datasets[0].data.shift();
      }

      chart.update();
    }, 1000);

    // Tab switching function
    function openTab(evt, tabName) {
      let i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tab-content");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].classList.remove("active");
      }
      tablinks = document.getElementsByClassName("tab-link");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].classList.remove("active");
      }
      document.getElementById(tabName).classList.add("active");
      evt.currentTarget.classList.add("active");
    }
  </script>
</body>
</html>
